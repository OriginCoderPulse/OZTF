# OZTF ä¼ä¸šç®¡ç†ç³»ç»Ÿ

åŸºäº Vue 3 + TypeScript + Tauri çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼Œæä¾›é¡¹ç›®ç®¡ç†ã€äººå‘˜ç®¡ç†ã€è´¢åŠ¡ç®¡ç†ã€è§†é¢‘ä¼šè®®ç­‰ä¼ä¸šçº§åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [åŠŸèƒ½æ¨¡å—](#åŠŸèƒ½æ¨¡å—)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [å…¨å±€å·¥å…·ä½¿ç”¨](#å…¨å±€å·¥å…·ä½¿ç”¨)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## é¡¹ç›®æ¦‚è¿°

OZTF æ˜¯ä¸€ä¸ªä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿæ¡Œé¢åº”ç”¨ï¼Œé‡‡ç”¨ Tauri æ¡†æ¶æ„å»ºï¼Œæ”¯æŒ Windowsã€macOSã€Linux å¤šå¹³å°ã€‚ç³»ç»Ÿé›†æˆäº†é¡¹ç›®ç®¡ç†ã€äººå‘˜ç®¡ç†ã€è´¢åŠ¡ç®¡ç†ã€è§†é¢‘ä¼šè®®ã€è§†é¢‘æ’­æ”¾ç­‰æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼Œä¸ºä¼ä¸šæä¾›å…¨æ–¹ä½çš„ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

## åŠŸèƒ½æ¨¡å—

### 1. ä»ªè¡¨ç›˜ (Dashboard)
- æ•°æ®æ¦‚è§ˆ
- ç»Ÿè®¡å›¾è¡¨
- å¿«é€Ÿå…¥å£

### 2. é¡¹ç›®ç®¡ç† (Project)
- é¡¹ç›®åˆ—è¡¨æŸ¥çœ‹
- é¡¹ç›®è¯¦æƒ…ç®¡ç†
- é¡¹ç›®åˆ›å»ºå’Œç¼–è¾‘
- é¡¹ç›®æˆå‘˜ç®¡ç†
- åŠŸèƒ½ç®¡ç†ï¼ˆFeatureï¼‰
- Bug ç®¡ç†
- å¼€å‘äººå‘˜ç®¡ç†
- é¡¹ç›®è¿›åº¦è·Ÿè¸ª

### 3. äººå‘˜ç®¡ç† (Staff)
- å‘˜å·¥ä¿¡æ¯ç®¡ç†
- å‘˜å·¥è¯¦æƒ…æŸ¥çœ‹
- éƒ¨é—¨ç®¡ç†
- å‘˜å·¥çŠ¶æ€ç®¡ç†
- éƒ¨é—¨ç»Ÿè®¡
- è–ªèµ„ç»Ÿè®¡

### 4. è´¢åŠ¡ç®¡ç† (Finance)
- è´¢åŠ¡æ•°æ®æŸ¥çœ‹
- è´¢åŠ¡æŠ¥è¡¨
- è´¢åŠ¡ç»Ÿè®¡

### 5. è§†é¢‘ä¼šè®® (Meet)
- ä¼šè®®åˆ›å»º
- ä¼šè®®åŠ å…¥
- å®æ—¶éŸ³è§†é¢‘é€šè¯
- å±å¹•å…±äº«
- å‚ä¼šäººç®¡ç†
- ä¼šè®®çŠ¶æ€ç®¡ç†

### 6. è§†é¢‘æ’­æ”¾ (Video)
- è§†é¢‘åˆ—è¡¨
- è§†é¢‘æ’­æ”¾
- å†å²è®°å½•
- å¤§å±æ’­æ”¾

### 7. å…¶ä»–åŠŸèƒ½
- Excalidraw ç»˜å›¾é›†æˆ
- PDF é¢„è§ˆ
- å›¾è¡¨å±•ç¤ºï¼ˆEChartsï¼‰
- è¡¨æ ¼ç»„ä»¶
- è¡¨å•æ„å»ºå™¨

## æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Vue 3.5** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript 5.6** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **TSX** - JSX çš„ TypeScript ç‰ˆæœ¬
- **Vue Router 4.5** - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨

### æ¡Œé¢æ¡†æ¶
- **Tauri 2.x** - è½»é‡çº§æ¡Œé¢åº”ç”¨æ¡†æ¶
- **Rust** - åç«¯è¿è¡Œæ—¶ï¼ˆTauri ä½¿ç”¨ï¼‰

### æ„å»ºå·¥å…·
- **Vite 6.0** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- **vue-tsc** - Vue 3 TypeScript ç±»å‹æ£€æŸ¥

### UI ç»„ä»¶åº“
- **è‡ªå®šä¹‰ç»„ä»¶** - åŸºäº Vue 3 çš„è‡ªå®šä¹‰ç»„ä»¶åº“

### éŸ³è§†é¢‘
- **TRTC SDK v5.15** - è…¾è®¯äº‘å®æ—¶éŸ³è§†é¢‘ SDK

### å·¥å…·åº“
- **axios** - HTTP å®¢æˆ·ç«¯
- **echarts** - æ•°æ®å¯è§†åŒ–
- **hls.js** - HLS è§†é¢‘æ’­æ”¾
- **vue-pdf-embed** - PDF é¢„è§ˆ
- **@excalidraw/excalidraw** - ç»˜å›¾å·¥å…·
- **crypto-js** - åŠ å¯†å·¥å…·
- **pako** - æ•°æ®å‹ç¼©
- **motion-v** - Vue åŠ¨ç”»åº“

### æ ·å¼å¤„ç†
- **Sass** - CSS é¢„å¤„ç†å™¨

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 14.x
- **pnpm** >= 7.xï¼ˆæ¨èï¼‰æˆ– npm >= 6.x
- **Rust** >= 1.70ï¼ˆTauri éœ€è¦ï¼‰
- **ç³»ç»Ÿä¾èµ–**ï¼š
  - Windows: Microsoft Visual C++ Build Tools
  - macOS: Xcode Command Line Tools
  - Linux: ç³»ç»Ÿå¼€å‘å·¥å…·é“¾

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆåŒ…å« Tauri åº”ç”¨ï¼‰
pnpm app

# æˆ–ä»…å¯åŠ¨ Web å¼€å‘æœåŠ¡å™¨
pnpm dev
```

- Web å¼€å‘æœåŠ¡å™¨ï¼š`http://localhost:1420`
- Tauri åº”ç”¨ä¼šè‡ªåŠ¨å¯åŠ¨

### æ„å»ºåº”ç”¨

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# æ„å»º Tauri åº”ç”¨
pnpm tauri build
```

æ„å»ºäº§ç‰©ï¼š
- Web ç‰ˆæœ¬ï¼š`dist/` ç›®å½•
- Tauri åº”ç”¨ï¼š`src-tauri/target/release/` ç›®å½•

### é¢„è§ˆæ„å»º

```bash
pnpm preview
```

## é¡¹ç›®ç»“æ„

```
OZTF/
â”œâ”€â”€ src/                      # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ Components/          # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Alert/          # è­¦å‘Šæç¤º
â”‚   â”‚   â”œâ”€â”€ AnimationNumberText/  # æ•°å­—åŠ¨ç”»
â”‚   â”‚   â”œâ”€â”€ Drawer/         # æŠ½å±‰ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Echarts/        # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Excalidraw/     # ç»˜å›¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FormBuilder/    # è¡¨å•æ„å»ºå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Date/       # æ—¥æœŸé€‰æ‹©å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Input/      # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ Radio/      # å•é€‰æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ Selector/   # é€‰æ‹©å™¨
â”‚   â”‚   â”‚   â””â”€â”€ TextArea/   # æ–‡æœ¬åŸŸ
â”‚   â”‚   â”œâ”€â”€ Message/        # æ¶ˆæ¯æç¤º
â”‚   â”‚   â”œâ”€â”€ Paginition/     # åˆ†é¡µç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Popup/          # å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PreviewPDF/     # PDF é¢„è§ˆ
â”‚   â”‚   â”œâ”€â”€ Svg/            # SVG å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ Table/          # è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â””â”€â”€ VideoPlayer/    # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”œâ”€â”€ Views/              # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ Main.tsx       # ä¸»å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ Tab/           # æ ‡ç­¾é¡µç»„ä»¶
â”‚   â”‚   â””â”€â”€ EntryContent/   # å†…å®¹é¡µé¢
â”‚   â”‚       â”œâ”€â”€ DashBoard/  # ä»ªè¡¨ç›˜
â”‚   â”‚       â”œâ”€â”€ Project/    # é¡¹ç›®ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ Staff/      # äººå‘˜ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ Finance/    # è´¢åŠ¡ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ Meet/       # è§†é¢‘ä¼šè®®
â”‚   â”‚       â””â”€â”€ Video/      # è§†é¢‘æ’­æ”¾
â”‚   â”œâ”€â”€ Utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ Network.ts     # ç½‘ç»œè¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ MessageHook.ts # æ¶ˆæ¯é’©å­
â”‚   â”‚   â”œâ”€â”€ PopupHook.ts   # å¼¹çª—é’©å­
â”‚   â”‚   â”œâ”€â”€ EventBus.ts    # äº‹ä»¶æ€»çº¿
â”‚   â”‚   â”œâ”€â”€ Timer.ts       # å®šæ—¶å™¨
â”‚   â”‚   â”œâ”€â”€ Storage.ts     # å­˜å‚¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ GlobalConfig.ts # å…¨å±€é…ç½®
â”‚   â”‚   â”œâ”€â”€ IconPath.ts    # å›¾æ ‡è·¯å¾„
â”‚   â”‚   â”œâ”€â”€ Date.ts        # æ—¥æœŸå·¥å…·
â”‚   â”‚   â”œâ”€â”€ HighFrequencyControl.ts # é«˜é¢‘æ§åˆ¶
â”‚   â”‚   â””â”€â”€ Meet/          # ä¼šè®®å·¥å…·
â”‚   â”‚       â”œâ”€â”€ TRTC.ts    # TRTC SDK å°è£…
â”‚   â”‚       â”œâ”€â”€ LibGenerateTestUserSig.ts # UserSig ç”Ÿæˆ
â”‚   â”‚       â””â”€â”€ RoomFormat.ts # æˆ¿é—´æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ App.tsx             # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ App.scss            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ main.ts             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ router.ts           # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ global.d.ts         # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ vite-env.d.ts       # Vite ç±»å‹å®šä¹‰
â”œâ”€â”€ src-tauri/              # Tauri åç«¯
â”‚   â”œâ”€â”€ src/               # Rust æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ main.rs       # ä¸»å…¥å£
â”‚   â”‚   â””â”€â”€ lib.rs        # åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ Cargo.toml        # Rust ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json   # Tauri é…ç½®
â”‚   â””â”€â”€ icons/            # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ index.html            # HTML æ¨¡æ¿
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- ç»„ä»¶ä½¿ç”¨ TSX è¯­æ³•
- æ ·å¼ä½¿ç”¨ SCSS é¢„å¤„ç†å™¨
- éµå¾ª ESLint è§„åˆ™

### è·¯ç”±é…ç½®

è·¯ç”±å®šä¹‰åœ¨ `src/router.ts`ï¼š

```typescript
{
  path: '/project',
  name: 'Project',
  component: () => import('./Views/EntryContent/Project/Project.tsx')
}
```

### ç»„ä»¶å¼€å‘

#### åˆ›å»ºæ–°ç»„ä»¶

```tsx
import { defineComponent } from "vue";
import "./Component.scss";

export default defineComponent({
  name: "ComponentName",
  setup() {
    return () => (
      <div class="component">
        {/* ç»„ä»¶å†…å®¹ */}
      </div>
    );
  },
});
```

#### ä½¿ç”¨ Controller æ¨¡å¼

```typescript
// Component.controller.ts
export class ComponentController {
  public state = ref(false);
  
  public toggle() {
    this.state.value = !this.state.value;
  }
}

// Component.tsx
const controller = new ComponentController();
```

## å…¨å±€å·¥å…·ä½¿ç”¨

### 1. ç½‘ç»œè¯·æ±‚ ($network)

```typescript
$network.request(
  "apiKey",           // æ¥å£é”®åï¼ˆå¯¹åº” GlobalConfig.ts ä¸­çš„é…ç½®ï¼‰
  { param: "value" }, // è¯·æ±‚å‚æ•°
  (data) => {         // æˆåŠŸå›è°ƒ
    console.log(data);
  },
  (error) => {        // å¤±è´¥å›è°ƒ
    $message.error({ message: error });
  }
);
```

**é…ç½®ä½ç½®**ï¼š`src/Utils/GlobalConfig.ts`

### 2. æ¶ˆæ¯æç¤º ($message)

```typescript
// æˆåŠŸæç¤º
$message.success({
  message: "æ“ä½œæˆåŠŸ",
  duration: 3000  // å¯é€‰ï¼Œé»˜è®¤ 2000ms
});

// é”™è¯¯æç¤º
$message.error({
  message: "æ“ä½œå¤±è´¥"
});

// è­¦å‘Šæç¤º
$message.warning({
  message: "è¯·æ³¨æ„"
});

// ä¿¡æ¯æç¤º
$message.info({
  message: "æç¤ºä¿¡æ¯"
});
```

### 3. å¼¹çª— ($popup)

#### æ™®é€šå¼¹çª—

```tsx
const popupId = $popup.popup(
  { padding: '20px' },  // æ ·å¼é…ç½®
  {
    component: YourComponent,
    props: { someProp: 'value' }
  }
);

// å…³é—­å¼¹çª—
$popup.close(popupId);
```

#### ç¡®è®¤å¼¹çª—

```typescript
$popup.alert(
  "ç¡®è®¤è¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ",
  {
    buttonCount: 2,
    onBtnRight: () => {
      // ç¡®è®¤æ“ä½œ
    },
    onBtnLeft: () => {
      // å–æ¶ˆæ“ä½œ
    }
  }
);
```

### 4. äº‹ä»¶æ€»çº¿ ($event)

```typescript
// è®¢é˜…äº‹ä»¶
$event.on("eventName", (data) => {
  console.log(data);
});

// å‘å¸ƒäº‹ä»¶
$event.emit("eventName", { data: "value" });

// å–æ¶ˆè®¢é˜…
$event.off("eventName");
```

### 5. å®šæ—¶å™¨ ($timer)

```typescript
// å»¶è¿Ÿæ‰§è¡Œ
const clearDelay = $timer.delay("taskName", () => {
  console.log("å»¶è¿Ÿæ‰§è¡Œ");
}, 2000);

// å®šæ—¶æ‰§è¡Œ
const clearRegular = $timer.regular("taskName", () => {
  console.log("å®šæ—¶æ‰§è¡Œ");
}, 3000);

// æ¸…é™¤ä»»åŠ¡ï¼ˆé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨æ¸…é™¤ï¼Œç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†ï¼‰
// clearDelay();
// clearRegular();
```

### 6. å­˜å‚¨å·¥å…· ($storage)

```typescript
// è®¾ç½®å­˜å‚¨
await $storage.set("key", "value");

// è·å–å­˜å‚¨
const value = await $storage.get("key");

// åˆ é™¤å­˜å‚¨
await $storage.remove("key");
```

## Tauri API ä½¿ç”¨

### æ–‡ä»¶æ“ä½œ

```typescript
import { open } from '@tauri-apps/plugin-opener';

// æ‰“å¼€æ–‡ä»¶
await open('path/to/file.pdf');
```

### çª—å£æ“ä½œ

```typescript
import { getCurrentWindow } from '@tauri-apps/api/window';

const window = getCurrentWindow();
await window.minimize();
await window.maximize();
await window.close();
```

## å¸¸è§é—®é¢˜

### 1. Tauri æ„å»ºå¤±è´¥

**é—®é¢˜**ï¼šRust ç¼–è¯‘é”™è¯¯æˆ–ä¾èµ–é—®é¢˜

**è§£å†³**ï¼š
- ç¡®ä¿ Rust ç‰ˆæœ¬ >= 1.70
- è¿è¡Œ `cargo clean` æ¸…ç†æ„å»ºç¼“å­˜
- æ£€æŸ¥ `src-tauri/Cargo.toml` ä¾èµ–é…ç½®

### 2. ç½‘ç»œè¯·æ±‚å¤±è´¥

**é—®é¢˜**ï¼š`Request Plugin Is Not Installed !`

**è§£å†³**ï¼š
- æ£€æŸ¥ `main.ts` ä¸­æ˜¯å¦æ­£ç¡®å¼•å…¥ Network æ’ä»¶
- ç¡®è®¤ `GlobalConfig.ts` ä¸­é…ç½®äº†æ­£ç¡®çš„ API åœ°å€

### 3. æƒé™é”™è¯¯

**é—®é¢˜**ï¼š`No permission to request this interface !`

**è§£å†³**ï¼š
- æ£€æŸ¥ `GlobalConfig.ts` ä¸­çš„æƒé™é…ç½®
- ç¡®è®¤ç”¨æˆ·è§’è‰²æœ‰ç›¸åº”æƒé™

### 4. äº‹ä»¶é‡å¤æ³¨å†Œ

**é—®é¢˜**ï¼š`The event already exists!`

**è§£å†³**ï¼š
- ç¡®ä¿äº‹ä»¶åç§°å”¯ä¸€
- åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆäº‹ä»¶è®¢é˜…

### 5. TRTC è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼šWebSocket è¿æ¥å¤±è´¥

**è§£å†³**ï¼š
- æ£€æŸ¥ TRTC é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

## æ„å»ºå’Œå‘å¸ƒ

### å¼€å‘æ„å»º

```bash
pnpm build
```

### Tauri åº”ç”¨æ„å»º

```bash
pnpm tauri build
```

æ„å»ºäº§ç‰©ä½ç½®ï¼š
- Windows: `src-tauri/target/release/oztf.exe`
- macOS: `src-tauri/target/release/bundle/macos/`
- Linux: `src-tauri/target/release/bundle/linux/`

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

```env
# API åŸºç¡€åœ°å€
VITE_API_BASE_URL=http://localhost:1024

# TRTC é…ç½®
VITE_TRTC_APP_ID=ä½ çš„TRTC_APP_ID
VITE_TRTC_SECRET_KEY=ä½ çš„TRTC_SECRET_KEY
```

## è®¸å¯è¯

ISC
