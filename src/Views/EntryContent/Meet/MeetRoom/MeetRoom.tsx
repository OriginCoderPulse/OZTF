import { defineComponent, Fragment, ref } from "vue";
import { useRoute } from "vue-router";
import "./MeetRoom.scss";
import { Motion } from "motion-v";
import { invoke } from "@tauri-apps/api/core";
import Svg from "@/Components/Svg/Svg.tsx";

export default defineComponent({
  name: "MeetRoom",
  setup() {
    const { params } = useRoute();
    const showParticipant = ref(false);
    const microphoneState = ref(false);
    const cameraState = ref(false);

    console.log(params)

    return () => (
      <div class="meet-room">
        <div class="meet-main">
          <div class="meet-video">
            <div
              class="show-participant"
              onClick={() => (showParticipant.value = !showParticipant.value)}
            >
              <Motion
                animate={{
                  rotate: showParticipant.value ? 180 : 0,
                }}
                transition={{
                  duration: 0.3,
                  ease: "easeInOut",
                }}
                class="motion-show-participant"
              >
                <Svg
                  svgPath={['M576 672c-6.4 0-19.2 0-25.6-6.4l-128-128c-12.8-12.8-12.8-32 0-44.8l128-128c12.8-12.8 32-12.8 44.8 0s12.8 32 0 44.8L492.8 512l102.4 102.4c12.8 12.8 12.8 32 0 44.8C595.2 672 582.4 672 576 672z']}
                  width="24"
                  height="24"
                  class="icon"
                  fill={'#dddddd'}
                />
              </Motion>
            </div>
          </div>
          <Motion
            initial={{ width: 0, height: "100%", marginLeft: 0 }}
            animate={{
              width: showParticipant.value ? "20%" : 0,
              height: "100%",
              marginLeft: showParticipant.value ? 15 : 0,
            }}
            exit={{ width: 0, height: "100%", marginLeft: 0 }}
            transition={{ duration: 0.3, ease: "easeInOut" }}
            class="meet-participant"
          ></Motion>
        </div>
        <div class="meet-operator">
          <div class="operator-list">
            <div
              class="operator-item"
              onClick={() => (microphoneState.value = !microphoneState.value)}
            >
              {microphoneState.value ? (
                <Fragment>
                  <Svg
                    svgPath="M512 128a128 128 0 0 0-128 128v170.666667a128 128 0 0 0 256 0V256a128 128 0 0 0-128-128z m0-85.333333a213.333333 213.333333 0 0 1 213.333333 213.333333v170.666667a213.333333 213.333333 0 0 1-426.666666 0V256a213.333333 213.333333 0 0 1 213.333333-213.333333zM130.346667 469.333333H216.32a298.752 298.752 0 0 0 591.274667 0h86.016A384.170667 384.170667 0 0 1 554.666667 808.32V981.333333h-85.333334v-173.013333A384.170667 384.170667 0 0 1 130.346667 469.333333z"
                    width="20"
                    height="20"
                    class="icon"
                    fill="#dddddd"
                  />
                </Fragment>
              ) : (
                <Fragment>
                  <Svg
                    svgPath="M700.8 761.130667A381.482667 381.482667 0 0 1 554.666667 808.32V981.333333h-85.333334v-173.013333A384.170667 384.170667 0 0 1 130.346667 469.333333H216.32a298.752 298.752 0 0 0 421.12 228.437334l-66.176-66.133334A213.333333 213.333333 0 0 1 298.666667 426.666667V358.997333L59.434667 119.808l60.373333-60.373333 844.757333 844.8-60.373333 60.330666-203.392-203.434666z m-315.392-315.392l107.52 107.52a128.085333 128.085333 0 0 1-107.52-107.52z m441.258667 201.088l-61.568-61.525334c21.717333-34.56 36.522667-73.813333 42.538666-115.968h86.016a381.866667 381.866667 0 0 1-66.986666 177.493334z m-124.16-124.117334l-66.048-66.048c2.304-9.642667 3.541333-19.626667 3.541333-29.994666V256a128 128 0 0 0-248.234667-44.032L327.936 148.096A213.333333 213.333333 0 0 1 725.333333 256v170.666667a212.48 212.48 0 0 1-22.784 96.042666z"
                    width="20"
                    height="20"
                    class="icon"
                    fill="#dddddd"
                  />
                </Fragment>
              )}
            </div>
            <div
              class="operator-item"
              onClick={() => (cameraState.value = !cameraState.value)}
            >
              {cameraState.value ? (
                <Fragment>
                  <Svg
                    svgPath="M554.666667 256V170.666667H213.333333V85.333333h426.666667v170.666667h42.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v93.866666l222.421334-155.733333a21.333333 21.333333 0 0 1 33.578666 17.493333v515.413334a21.333333 21.333333 0 0 1-33.578666 17.493333L725.333333 631.466667V810.666667a42.666667 42.666667 0 0 1-42.666666 42.666666H85.333333a42.666667 42.666667 0 0 1-42.666666-42.666666V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667h469.333334z m-341.333334 170.666667v85.333333h85.333334v-85.333333H213.333333z"
                    width="20"
                    height="20"
                    class="icon"
                    fill="#dddddd"
                  />
                </Fragment>
              ) : (
                <Fragment>
                  <Svg
                    svgPath="M554.666667 256V170.666667H213.333333V85.333333h426.666667v170.666667h42.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v93.866666l222.421334-155.733333a21.333333 21.333333 0 0 1 33.578666 17.493333v515.413334a21.333333 21.333333 0 0 1-33.578666 17.493333L725.333333 631.466667V810.666667a42.666667 42.666667 0 0 1-42.666666 42.666666H85.333333a42.666667 42.666667 0 0 1-42.666666-42.666666V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667h469.333334z m85.333333 85.333333H128v426.666667h512V341.333333z m85.333333 185.984l170.666667 119.466667V377.173333l-170.666667 119.466667v30.634667zM213.333333 426.666667h85.333334v85.333333H213.333333v-85.333333z"
                    width="20"
                    height="20"
                    class="icon"
                    fill="#dddddd"
                  />
                </Fragment>
              )}
            </div>
            <div class="operator-item">
              <Svg
                svgPath="M896 128a42.666667 42.666667 0 0 1 42.666667 42.666667v298.666666h-85.333334V213.333333H170.666667v597.333334h256v85.333333H128a42.666667 42.666667 0 0 1-42.666667-42.666667V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h768z m0 426.666667a42.666667 42.666667 0 0 1 42.666667 42.666666v256a42.666667 42.666667 0 0 1-42.666667 42.666667h-341.333333a42.666667 42.666667 0 0 1-42.666667-42.666667v-256a42.666667 42.666667 0 0 1 42.666667-42.666666h341.333333z m-405.333333-256L403.498667 385.834667l96 96-60.330667 60.330666-96-96L256 533.333333V298.666667h234.666667z"
                width="20"
                height="20"
                class="icon"
                fill="#dddddd"
              />
            </div>
            <div class="operator-item">
              <Svg
                svgPath={[
                  "M704 320a192 192 0 1 1-384 0 192 192 0 0 1 384 0zM512 448a128 128 0 1 0 0-256 128 128 0 0 0 0 256z",
                  "M160 832A224 224 0 0 1 384 608h256a32 32 0 0 0 0-64H384A288 288 0 0 0 96 832v64a32 32 0 0 0 64 0v-64zM736 576a32 32 0 0 0-32 32V704H608a32 32 0 0 0 0 64H704v96a32 32 0 0 0 64 0V768h96a32 32 0 0 0 0-64H768V608a32 32 0 0 0-32-32z"
                ]}
                width="20"
                height="20"
                class="icon"
                fill="#dddddd"
              />
            </div>
            <div
              class="operator-item"
              onClick={() =>
                $popup.alert("确定要退出会议吗", async () => {
                  invoke("close_meeting_window").then();
                })
              }
            >
              <Svg
                svgPath={[
                  "M918.4 489.6l-160-160c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l105.6 105.6L512 480c-19.2 0-32 12.8-32 32s12.8 32 32 32l307.2 0-105.6 105.6c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l160-163.2c0 0 0-3.2 3.2-3.2C931.2 518.4 931.2 499.2 918.4 489.6z",
                  "M832 736c-19.2 0-32 12.8-32 32l0 64c0 19.2-12.8 32-32 32L224 864c-19.2 0-32-12.8-32-32L192 192c0-19.2 12.8-32 32-32l544 0c19.2 0 32 12.8 32 32l0 64c0 19.2 12.8 32 32 32s32-12.8 32-32L864 192c0-54.4-41.6-96-96-96L224 96C169.6 96 128 137.6 128 192l0 640c0 54.4 41.6 96 96 96l544 0c54.4 0 96-41.6 96-96l0-64C864 748.8 851.2 736 832 736z"
                ]}
                width="20"
                height="20"
                class="icon"
                fill="#dddddd"
              />
            </div>
          </div>
        </div>
      </div>
    );
  },
});
